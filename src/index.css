/*
 * File: src/index.css
 * Purpose: Global Tailwind layers, base resets, and Markade theme utilities (fonts, colors, a11y).
 * Update Log:
 * - 2025-08-13: Switched to semantic color utilities; added tokens import; unified focus ring; remapped mk-* helpers.
 * - 2025-08-13: Tidy â€” moved imports before Tailwind layers, fixed ring offset class, removed empty .font-market utility.
 */

/* Tokens & fonts first so utilities resolve CSS vars and font-families at runtime */
@import "./theme/tokens.css";
@import "./assets/fonts/fonts.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Keep global resets in Tailwind's base layer */
@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  html, body, #root { min-height: 100%; }

  html {
    -webkit-text-size-adjust: 100%;
    color-scheme: dark;
  }

  body {
    @apply font-market text-fg-default bg-app antialiased;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    -webkit-tap-highlight-color: transparent;
  }

  :focus { outline: none; }

  /* Use default ring color from tailwind.config (focus-ring) + app offset */
  :focus-visible {
    @apply ring-2 ring-offset-2 ring-offset-app;
  }

  ::selection {
    /* use accent-yellow token at 25% */
    background: rgb(var(--accent-yellow) / 0.25);
  }

  /* iOS safe-areas (used by .safe-area utility) */
  :root {
    --safe-top: env(safe-area-inset-top);
    --safe-right: env(safe-area-inset-right);
    --safe-bottom: env(safe-area-inset-bottom);
    --safe-left: env(safe-area-inset-left);
  }
}

@layer utilities {

  /* Accessibility: visually hidden but still in DOM */
  .visually-hidden { @apply sr-only; }

  /* Crisp sprite rendering */
  .pixelated {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    -ms-interpolation-mode: nearest-neighbor;
  }

  /* Pad for notches/home bar when needed */
  .safe-area {
    padding-top: var(--safe-top);
    padding-right: var(--safe-right);
    padding-bottom: var(--safe-bottom);
    padding-left: var(--safe-left);
  }

  /* Tappable: minimum comfortable hit target */
  .tappable {
    min-height: 44px;
    @apply px-3 flex items-center;
  }

  /* Only show hover styles on devices that hover */
  @media (hover: hover) and (pointer: fine) {
    .hover-only\:underline:hover { text-decoration: underline; }
  }

  /* Full-height sections that play nice with mobile keyboards */
  .min-h-dvh { min-height: 100dvh; }

  .mk-arcade-display { @apply font-arcade font-bold leading-none tracking-tight; }
}